---
layout:     post
title:      嵌入式面试题
subtitle:   嵌入式
date:       2018-04-10
author:     hades
header-img: img/my-blog-picture.jpg
catalog: true
tags:
    - hades
    - 嵌入式
    - 面试
---
 
# 嵌入式面试题
 
## 内存管理MMU的作用？
- 内存分配和回收
- 内存保护
- 内存扩充
- 地址映射

## 异步IO和同步IO的区别?
如果是同步IO，当一个IO操作执行时，应用程序必须等待，直到此IO执行完，相反，异步IO操作在后台运行，
 IO操作和应用程序可以同时运行，提高系统性能，提高IO流量； 在同步文件IO中，线程启动一个IO操作然后就立即进入等待状态，直到IO操作完成后才醒来继续执行，而异步文件IO中，
 线程发送一个IO请求到内核，然后继续处理其他事情，内核完成IO请求后，将会通知线程IO操作完成了。

## 编译和链接有什么不同？（如外部符号的处理）

- 编译生成的是目标文件(object  *.o);
-  编译过程中对于外部符号不做任何解释和处理。外部符号对应的就是“符号”
-  链接生成的是可执行程序
-  链接将会解释和处理外部符号。外部符号对应的是地址

## 驱动中操作物理绝对地址为什么要先ioremap?
因为内核没有办法直接访问物理内存地址，必须先通过ioremap获得对应的虚拟地址。内核空间和用户空间一般通过系统调用进行通信。

## 嵌入式设备，为加快启动速度，可以做哪些方面的优化？
linux默认的安装内核相当庞大，为了保证系统的兼容性和灵活性，支持热插拔操作，内核启动时要进行大量的硬件检测和初始化工作，而嵌入式的硬件都是固定的，只需要选择需要的硬件驱动就可以，不需要全部的硬件驱动都检测；因此可以进行适当的裁剪内核达到缩小启动linux系统的目的；同时可以统计驱动模块的耗时时间，对耗时较长的模块驱动加以分析，优化；

## 嵌入式linux中tty设备驱动的体系结构？

Linux内核中tty的层次结构包含tty核心、tty线路规程和tty驱动；
 
tty设备发送数据的流程为：tty核心从一个用户获取将要发送给一个tty设备的数据，tty核心将数据传递给tty线路规程驱动，接着数据被传递到tty驱动，tty驱动将数据转换为可以发送给硬件的格式。

接收数据的流程为： 从tty硬件接收到的数据向上交给tty驱动，进入tty线路规程驱动，再进入 tty 核心，在这里它被一个用户获取。尽管大多数时候tty核心和tty之间的数据传输会经历tty线路规程的转换，但是tty驱动与tty核心之间也可以直接传输数据。 

## TCP与UDP的区别?

TCP：是面向连接的流传输控制协议，具有高可靠性，确保传输数据的正确性，有验证重发机制，不会出现丢失或乱序。

UDP：是无连接的数据报服务，不对数据报进行检查与修改，无须等待对方的应答，会出现分组丢失、重复、乱序，但具有较好的实时性，UDP段结构比TCP的段结构简单，因此网络开销也小。

## 进程间通讯的方式及优缺点.？

 A、管道( pipe )
管道是一种半双工的通信方式，数据只能单向流动，而且只能在具有亲缘关系的进程间使用。进程的亲缘关系通常是指父子进程关系。

B、有名管道 (named pipe)
有名管道也是半双工的通信方式，但是它允许无亲缘关系进程间的通信。

C、信号量( semophore )
信号量是一个计数器，可以用来控制多个进程对共享资源的访问。它常作为一种锁机制，防止某进程正在访问共享资源时，其他进程也访问该资源。因此，主要作为进程间以及同一进程内不同线程之间的同步手段。

D、消息队列( message queue )
消息队列是由消息的链表，存放在内核中并由消息队列标识符标识。消息队列克服了信号传递信息少、管道只能承载无格式字节流以及缓冲区大小受限等缺点。

E、信号 ( sinal )
信号是一种比较复杂的通信方式，用于通知接收进程某个事件已经发生。

F、共享内存( shared memory）
共享内存就是映射一段能被其他进程所访问的内存，这段共享内存由一个进程创建，但多个进程都可以访问。共享内存是最快的IPC方式，它是 针对其他进程间通信方式运行效率低而专门设计的。它往往与其他通信机制，如信号量，配合使用，来实现进程间的同步和通信。

G、套接字( socket )
套解口也是一种进程间通信机制，与其他通信机制不同的是，它可用于不同及其间的进程通信。

优缺点：
    A、无名管道简单方便，但局限于单向通信的工作方式，并且只能在亲缘进程之间实现管道的共享；有名管道虽然可以提供给任意关系的进程使用，但是由于其长期存在于系统之中，使用不当容易出错。

    B、消息队列可以不再局限于父子进程，而允许任意进程通过共享消息队列来实现进程间通信，并由系统调用函数来实现消息发送和接收之间的同步，从而使得用户在使用消息缓冲进行通信时不再需要考虑同步问题。使用方便，但是信息的复制需要额外消耗 CPU的时间，不适宜于信息量大或操作频繁的场合。

    C、共享内存针对消息缓冲的缺点改而利用内存缓冲区直接交换信息，无须复制，快捷、信息量大是其优点。但是共享内存的通信方式是通过将共享的内存缓冲区直接附加到进程的虚拟地址空间中来实现的。因此，进程之间的读写操作的同步问题操作系统无法实现，必须由各进程利用其他同步工具解决。另外，由于内存实体存在于计算机系统中，所以只能由处于同一个计算机系统中的诸进程共享，不能网络通信。

## Linux系统中多线程同步使用的方法： 

Linux系统中多线程同步有最常用的是：互斥锁、条件变量和信号量。 
